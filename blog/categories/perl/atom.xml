<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>perl | Matthew Daly&apos;s Blog</title>
    <link>http://matthewdaly.co.uk/blog/categories/perl/</link>
    <updated>2016-10-16T17:27:10Z</updated>
    <author>
        <name>Matthew Daly</name>
        <email>matthew@matthewdaly.co.uk</email>
        <uri>http://matthewdaly.co.uk</uri>
    </author>
    <link rel="alternate" href="http://matthewdaly.co.uk/blog/categories/perl/"/>
    <subtitle>perl | I&apos;m a web developer in Norfolk. This is my blog...</subtitle>
    <rights>Matthew Daly 2016</rights>
    <generator>Feed for Node.js</generator>
    <entry>
        <title type="html"><![CDATA[Deleting unwanted Vim swap files using Perl]]></title>
        <id>http://matthewdaly.co.uk/blog/2010/10/29/deleting-unwanted-vim-swap-files-using-perl/</id>
        <link href="http://matthewdaly.co.uk/blog/2010/10/29/deleting-unwanted-vim-swap-files-using-perl/">
        </link>
        <updated>2010-10-29T19:49:49Z</updated>
        <summary type="html"><![CDATA[<p>Yesterday I realised that I had somehow managed to scatter Vim swap files all across the Dropbox folder I use to share Perl and Python scripts I’d written between several computers, and it would be a good idea to clear them up. I didn’t like the idea of using grep to search for them and manually deleting them, so I decided this was the ideal opportunity to write a Perl script to do it for me!</p>
<p>I came up with the following:</p>
<pre><code class="hljs lang-perl"><table><tr><td class="linenos" data-pseudo-content="1"></td><td><span class="hljs-comment">#!/usr/bin/perl -w</span></td><tr><td class="linenos" data-pseudo-content="2"></td><td></td><tr><td class="linenos" data-pseudo-content="3"></td><td><span class="hljs-keyword">use</span> strict;</td><tr><td class="linenos" data-pseudo-content="4"></td><td><span class="hljs-keyword">use</span> Cwd;</td><tr><td class="linenos" data-pseudo-content="5"></td><td></td><tr><td class="linenos" data-pseudo-content="6"></td><td><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">searchDir</span></td><tr><td class="linenos" data-pseudo-content="7"></td><td></span>{</td><tr><td class="linenos" data-pseudo-content="8"></td><td>    <span class="hljs-comment"># Subroutine to scan a directory looking for Vim swap files</span></td><tr><td class="linenos" data-pseudo-content="9"></td><td>    <span class="hljs-comment"># Get directory to read and current directory</span></td><tr><td class="linenos" data-pseudo-content="10"></td><td>    <span class="hljs-keyword">my</span> $readdir = <span class="hljs-keyword">shift</span>;</td><tr><td class="linenos" data-pseudo-content="11"></td><td>    <span class="hljs-keyword">my</span> $startdir = cwd();</td><tr><td class="linenos" data-pseudo-content="12"></td><td></td><tr><td class="linenos" data-pseudo-content="13"></td><td>    <span class="hljs-comment"># Change directory to the target one</span></td><tr><td class="linenos" data-pseudo-content="14"></td><td>    <span class="hljs-keyword">chdir</span>($readdir) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">"Unable to open $readdir! $!\n"</span>;</td><tr><td class="linenos" data-pseudo-content="15"></td><td>    <span class="hljs-keyword">print</span> <span class="hljs-string">"Scanning contents of directory $startdir\n"</span>;</td><tr><td class="linenos" data-pseudo-content="16"></td><td></td><tr><td class="linenos" data-pseudo-content="17"></td><td>    <span class="hljs-comment"># Open the directory and grab the names of all the files and folders in it</span></td><tr><td class="linenos" data-pseudo-content="18"></td><td>    <span class="hljs-keyword">opendir</span>(DIR, <span class="hljs-string">"."</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">"Unable to open current directory! $!\n"</span>;</td><tr><td class="linenos" data-pseudo-content="19"></td><td>    <span class="hljs-keyword">my</span> @entries = <span class="hljs-keyword">readdir</span>(DIR) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">"Unable to read directory! $!\n"</span>;</td><tr><td class="linenos" data-pseudo-content="20"></td><td>    closedir(DIR);</td><tr><td class="linenos" data-pseudo-content="21"></td><td></td><tr><td class="linenos" data-pseudo-content="22"></td><td>    <span class="hljs-comment"># Loop through the files and folders in the directory</span></td><tr><td class="linenos" data-pseudo-content="23"></td><td>    <span class="hljs-keyword">foreach</span> <span class="hljs-keyword">my</span> $entry (@entries)</td><tr><td class="linenos" data-pseudo-content="24"></td><td>    {</td><tr><td class="linenos" data-pseudo-content="25"></td><td>        <span class="hljs-comment"># Skip this one and the one above it in the filesystem hierarchy</span></td><tr><td class="linenos" data-pseudo-content="26"></td><td>        <span class="hljs-keyword">next</span> <span class="hljs-keyword">if</span>($entry eq <span class="hljs-string">"."</span>);</td><tr><td class="linenos" data-pseudo-content="27"></td><td>        <span class="hljs-keyword">next</span> <span class="hljs-keyword">if</span>($entry eq <span class="hljs-string">".."</span>);</td><tr><td class="linenos" data-pseudo-content="28"></td><td></td><tr><td class="linenos" data-pseudo-content="29"></td><td>        <span class="hljs-comment"># If a file is a directory, call the searchDir subroutine recursively in order to scan it</span></td><tr><td class="linenos" data-pseudo-content="30"></td><td>        <span class="hljs-keyword">if</span>(-d $entry)</td><tr><td class="linenos" data-pseudo-content="31"></td><td>        {</td><tr><td class="linenos" data-pseudo-content="32"></td><td>            searchDir($entry);</td><tr><td class="linenos" data-pseudo-content="33"></td><td>            <span class="hljs-keyword">next</span>;</td><tr><td class="linenos" data-pseudo-content="34"></td><td>        }</td><tr><td class="linenos" data-pseudo-content="35"></td><td></td><tr><td class="linenos" data-pseudo-content="36"></td><td>        <span class="hljs-comment"># Use a regular expression to check to see if the current file starts with a period, and ends with .swp - if it does, it's a Vim swap file</span></td><tr><td class="linenos" data-pseudo-content="37"></td><td>        <span class="hljs-keyword">if</span>($entry =~ <span class="hljs-regexp">m/^\..*\.swp$/</span>)</td><tr><td class="linenos" data-pseudo-content="38"></td><td>        {</td><tr><td class="linenos" data-pseudo-content="39"></td><td>            <span class="hljs-comment"># Inform the user that a Vim swap file has been found and print out the path to it</span></td><tr><td class="linenos" data-pseudo-content="40"></td><td>            <span class="hljs-keyword">print</span> <span class="hljs-string">"Found a Vim swap file!\n"</span>;</td><tr><td class="linenos" data-pseudo-content="41"></td><td>            <span class="hljs-keyword">my</span> $swppath = cwd();</td><tr><td class="linenos" data-pseudo-content="42"></td><td>            <span class="hljs-keyword">print</span> <span class="hljs-string">"It's the file $entry in $swppath.\n"</span>;</td><tr><td class="linenos" data-pseudo-content="43"></td><td>            <span class="hljs-keyword">my</span> $fullpath = $swppath . <span class="hljs-string">"/"</span> . $entry;</td><tr><td class="linenos" data-pseudo-content="44"></td><td>            <span class="hljs-keyword">print</span> <span class="hljs-string">"The full path is $fullpath.\n"</span>;</td><tr><td class="linenos" data-pseudo-content="45"></td><td></td><tr><td class="linenos" data-pseudo-content="46"></td><td>            <span class="hljs-comment"># Prompt the user to delete the file</span></td><tr><td class="linenos" data-pseudo-content="47"></td><td>            <span class="hljs-keyword">print</span> <span class="hljs-string">"Do you wish to delete this file? (Y/N)\t"</span>;</td><tr><td class="linenos" data-pseudo-content="48"></td><td>            <span class="hljs-keyword">chomp</span>(<span class="hljs-keyword">my</span> $reply = );</td><tr><td class="linenos" data-pseudo-content="49"></td><td>            <span class="hljs-keyword">if</span>($reply =~ <span class="hljs-regexp">m/y/i</span>)</td><tr><td class="linenos" data-pseudo-content="50"></td><td>            {</td><tr><td class="linenos" data-pseudo-content="51"></td><td>                <span class="hljs-keyword">print</span> <span class="hljs-string">"Deleting $fullpath...\n"</span>;</td><tr><td class="linenos" data-pseudo-content="52"></td><td>                <span class="hljs-keyword">unlink</span>($fullpath);</td><tr><td class="linenos" data-pseudo-content="53"></td><td>            }</td><tr><td class="linenos" data-pseudo-content="54"></td><td>        }</td><tr><td class="linenos" data-pseudo-content="55"></td><td>    }</td><tr><td class="linenos" data-pseudo-content="56"></td><td></td><tr><td class="linenos" data-pseudo-content="57"></td><td>    <span class="hljs-keyword">chdir</span>($startdir);</td><tr><td class="linenos" data-pseudo-content="58"></td><td>}</td><tr><td class="linenos" data-pseudo-content="59"></td><td></td><tr><td class="linenos" data-pseudo-content="60"></td><td><span class="hljs-comment"># Get directory to begin the search</span></td><tr><td class="linenos" data-pseudo-content="61"></td><td><span class="hljs-keyword">print</span> <span class="hljs-string">"Enter directory to start search: "</span>;</td><tr><td class="linenos" data-pseudo-content="62"></td><td><span class="hljs-keyword">chomp</span>(<span class="hljs-keyword">my</span> $beginSearch = );</td><tr><td class="linenos" data-pseudo-content="63"></td><td></td><tr><td class="linenos" data-pseudo-content="64"></td><td><span class="hljs-comment"># call searchDir to start the search</span></td><tr><td class="linenos" data-pseudo-content="65"></td><td>searchDir($beginSearch);</td></table></code></pre>
<p>Thankfully, I’ve now discovered the <a href="https://wordpress.org/extend/plugins/preserve-code-formatting/">Preserve Code Formatting plugin</a> for WordPress, which seems to do a good job at making the code look presentable!</p>
<p>This isn’t perfect - it uses recursion to examine subdirectories, and when I ran it on my /home folder it somehow wound up in /sys on my Ubuntu machine and I ended up getting a deep recursion warning (a little research suggests this happens when it goes over 100 directories in). However, it seems to work fine for scanning individual folders in my /home directory, and that’s all I really wanted anyway.</p>
<p>I love how Perl makes writing this kind of simple script so easy. It’s a great language for that kind of systems administration task.</p>
]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[A couple of things I love about Perl]]></title>
        <id>http://matthewdaly.co.uk/blog/2010/10/27/a-couple-of-things-i-love-about-perl/</id>
        <link href="http://matthewdaly.co.uk/blog/2010/10/27/a-couple-of-things-i-love-about-perl/">
        </link>
        <updated>2010-10-26T23:15:33Z</updated>
        <summary type="html"><![CDATA[<p>In the time that I’ve been learning Perl, I’ve slowly grown to appreciate the strengths of the language more and more. There’s two things in particular that I like about Perl. Once that I really don’t think anyone is going to be surprised by is CPAN. It’s a fantastic resource - there are a huge quantity of Perl modules available for virtually any task under the sun, and they’re incredibly useful.</p>
<p>The other is just how good the documentation is - I’ve never considered myself to be someone who learns terribly well from Unix man pages, but perldoc seems to have very good documentation indeed, including that for CPAN modules. Also, it helps that if you don’t do well with the man page format, you have the option of running podwebserver and getting the documentation formatted as web pages.</p>
<p>To give an example, I’m particularly interested in all kinds of network programming, be it web development, IRC, Jabber or whatever, and I’d heard of the Net::IRC module so I decided to start using it to create a simple IRC bot (yes, I know I should really be using POE::Component::IRC instead!). Using the information gleaned from perldoc Net::IRC it was easy to get started writing a bot, and I’ve now come up with the following simple bot:</p>
<pre><code class="hljs lang-perl"><table><tr><td class="linenos" data-pseudo-content="1"></td><td><span class="hljs-comment">#!/usr/bin/perl -w</span></td><tr><td class="linenos" data-pseudo-content="2"></td><td></td><tr><td class="linenos" data-pseudo-content="3"></td><td><span class="hljs-keyword">use</span> strict;</td><tr><td class="linenos" data-pseudo-content="4"></td><td><span class="hljs-keyword">use</span> Net::IRC;</td><tr><td class="linenos" data-pseudo-content="5"></td><td></td><tr><td class="linenos" data-pseudo-content="6"></td><td><span class="hljs-keyword">my</span> $irc = new Net::IRC;</td><tr><td class="linenos" data-pseudo-content="7"></td><td><span class="hljs-keyword">my</span> $nick = <span class="hljs-string">"mattsbot"</span>;</td><tr><td class="linenos" data-pseudo-content="8"></td><td><span class="hljs-keyword">my</span> $server = <span class="hljs-string">"irc.freenode.net"</span>;</td><tr><td class="linenos" data-pseudo-content="9"></td><td><span class="hljs-keyword">my</span> $channel = <span class="hljs-string">"#botpark"</span>;</td><tr><td class="linenos" data-pseudo-content="10"></td><td><span class="hljs-keyword">my</span> $port = <span class="hljs-number">6667</span>;</td><tr><td class="linenos" data-pseudo-content="11"></td><td><span class="hljs-keyword">my</span> $ircname = <span class="hljs-string">"My wonderful bot"</span>;</td><tr><td class="linenos" data-pseudo-content="12"></td><td><span class="hljs-keyword">my</span> $owner = <span class="hljs-string">"mattbd"</span>; </td><tr><td class="linenos" data-pseudo-content="13"></td><td></td><tr><td class="linenos" data-pseudo-content="14"></td><td><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">on_connect</span></td><tr><td class="linenos" data-pseudo-content="15"></td><td></span>{</td><tr><td class="linenos" data-pseudo-content="16"></td><td>   <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;</td><tr><td class="linenos" data-pseudo-content="17"></td><td></td><tr><td class="linenos" data-pseudo-content="18"></td><td>   <span class="hljs-keyword">print</span> <span class="hljs-string">"Joining $channel\n"</span>;</td><tr><td class="linenos" data-pseudo-content="19"></td><td>   $self-&gt;<span class="hljs-keyword">join</span>($channel);</td><tr><td class="linenos" data-pseudo-content="20"></td><td>   $self-&gt;privmsg($channel,<span class="hljs-string">"Ready to go!"</span>);</td><tr><td class="linenos" data-pseudo-content="21"></td><td>}</td><tr><td class="linenos" data-pseudo-content="22"></td><td></td><tr><td class="linenos" data-pseudo-content="23"></td><td><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">on_disconnect</span></td><tr><td class="linenos" data-pseudo-content="24"></td><td></span>{</td><tr><td class="linenos" data-pseudo-content="25"></td><td>    <span class="hljs-keyword">my</span> $self = <span class="hljs-keyword">shift</span>;</td><tr><td class="linenos" data-pseudo-content="26"></td><td>    $self-&gt;<span class="hljs-keyword">join</span>($channel);</td><tr><td class="linenos" data-pseudo-content="27"></td><td>    $self-&gt;privmsg($channel, <span class="hljs-string">"Sorry about that - dropped out for a sec."</span>);</td><tr><td class="linenos" data-pseudo-content="28"></td><td>} </td><tr><td class="linenos" data-pseudo-content="29"></td><td></td><tr><td class="linenos" data-pseudo-content="30"></td><td><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">on_join</span></td><tr><td class="linenos" data-pseudo-content="31"></td><td></span>{</td><tr><td class="linenos" data-pseudo-content="32"></td><td>    <span class="hljs-comment"># Get the connection and event objects</span></td><tr><td class="linenos" data-pseudo-content="33"></td><td>    <span class="hljs-keyword">my</span> ($conn, $event) = @_;</td><tr><td class="linenos" data-pseudo-content="34"></td><td></td><tr><td class="linenos" data-pseudo-content="35"></td><td>    <span class="hljs-comment"># Get the nick that just joined</span></td><tr><td class="linenos" data-pseudo-content="36"></td><td>    <span class="hljs-keyword">my</span> $newnick = $event-&gt;{nick};</td><tr><td class="linenos" data-pseudo-content="37"></td><td></td><tr><td class="linenos" data-pseudo-content="38"></td><td>    <span class="hljs-comment"># Greet the new nick</span></td><tr><td class="linenos" data-pseudo-content="39"></td><td>    $conn-&gt;privmsg($channel, <span class="hljs-string">"Hello, $newnick! I'm a greeting bot!"</span>);</td><tr><td class="linenos" data-pseudo-content="40"></td><td>}</td><tr><td class="linenos" data-pseudo-content="41"></td><td></td><tr><td class="linenos" data-pseudo-content="42"></td><td><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">on_msg</span></td><tr><td class="linenos" data-pseudo-content="43"></td><td></span>{</td><tr><td class="linenos" data-pseudo-content="44"></td><td>    <span class="hljs-comment"># Get the connection and event objects</span></td><tr><td class="linenos" data-pseudo-content="45"></td><td>    <span class="hljs-keyword">my</span> ($conn, $event) = @_;</td><tr><td class="linenos" data-pseudo-content="46"></td><td></td><tr><td class="linenos" data-pseudo-content="47"></td><td>    <span class="hljs-comment"># Get nick of messaging user</span></td><tr><td class="linenos" data-pseudo-content="48"></td><td>    <span class="hljs-keyword">my</span> $messager = $event-&gt;{nick};</td><tr><td class="linenos" data-pseudo-content="49"></td><td></td><tr><td class="linenos" data-pseudo-content="50"></td><td>    <span class="hljs-comment"># Respond negatively</span></td><tr><td class="linenos" data-pseudo-content="51"></td><td>    $conn-&gt;privmsg($messager, <span class="hljs-string">"Sorry, I'm just a bot. Please don't message me!"</span>);</td><tr><td class="linenos" data-pseudo-content="52"></td><td>}</td><tr><td class="linenos" data-pseudo-content="53"></td><td></td><tr><td class="linenos" data-pseudo-content="54"></td><td><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">on_public</span></td><tr><td class="linenos" data-pseudo-content="55"></td><td></span>{</td><tr><td class="linenos" data-pseudo-content="56"></td><td>    <span class="hljs-comment"># Get the connection and event objects</span></td><tr><td class="linenos" data-pseudo-content="57"></td><td>    <span class="hljs-keyword">my</span> ($conn, $event) = @_;</td><tr><td class="linenos" data-pseudo-content="58"></td><td></td><tr><td class="linenos" data-pseudo-content="59"></td><td>    <span class="hljs-comment"># Get nick of messaging user</span></td><tr><td class="linenos" data-pseudo-content="60"></td><td>    <span class="hljs-keyword">my</span> $messager = $event-&gt;{nick};</td><tr><td class="linenos" data-pseudo-content="61"></td><td></td><tr><td class="linenos" data-pseudo-content="62"></td><td>    <span class="hljs-comment"># Get text of message</span></td><tr><td class="linenos" data-pseudo-content="63"></td><td>    <span class="hljs-keyword">my</span> $text = $event-&gt;{args}[<span class="hljs-number">0</span>];</td><tr><td class="linenos" data-pseudo-content="64"></td><td></td><tr><td class="linenos" data-pseudo-content="65"></td><td>    <span class="hljs-comment"># Check to see if text contains name of bot - if so message the user negatively</span></td><tr><td class="linenos" data-pseudo-content="66"></td><td>    <span class="hljs-keyword">if</span>($text =~ <span class="hljs-regexp">m/$nick/</span>)</td><tr><td class="linenos" data-pseudo-content="67"></td><td>    {</td><tr><td class="linenos" data-pseudo-content="68"></td><td>        $conn-&gt;privmsg($channel, <span class="hljs-string">"Sorry, $messager,I'm just a simple bot!"</span>);</td><tr><td class="linenos" data-pseudo-content="69"></td><td>    }</td><tr><td class="linenos" data-pseudo-content="70"></td><td>}</td><tr><td class="linenos" data-pseudo-content="71"></td><td></td><tr><td class="linenos" data-pseudo-content="72"></td><td><span class="hljs-keyword">my</span> $conn = $irc-&gt;newconn(<span class="hljs-string">Nick =&gt;</span>$nick,<span class="hljs-string">Server=&gt;</span>$server,<span class="hljs-string">Port=&gt;</span>$port,<span class="hljs-string">Ircname=&gt;</span>$ircname);</td><tr><td class="linenos" data-pseudo-content="73"></td><td>$conn-&gt;add_global_handler(<span class="hljs-string">'376'</span>, \&amp;on;_connect);</td><tr><td class="linenos" data-pseudo-content="74"></td><td>$conn-&gt;add_global_handler(<span class="hljs-string">'disconnect'</span>, \&amp;on;_disconnect);</td><tr><td class="linenos" data-pseudo-content="75"></td><td>$conn-&gt;add_global_handler(<span class="hljs-string">'msg'</span>, \&amp;on;_msg);</td><tr><td class="linenos" data-pseudo-content="76"></td><td>$conn-&gt;add_global_handler(<span class="hljs-string">'join'</span>, \&amp;on;_join);</td><tr><td class="linenos" data-pseudo-content="77"></td><td>$conn-&gt;add_global_handler(<span class="hljs-string">'msg'</span>, \&amp;on;_msg);</td><tr><td class="linenos" data-pseudo-content="78"></td><td>$conn-&gt;add_global_handler(<span class="hljs-string">'public'</span>, \&amp;on;_public);</td><tr><td class="linenos" data-pseudo-content="79"></td><td>$irc-&gt;start();</td></table></code></pre>
<p>Now, this bot isn’t exactly hugely capable - all it does is greet new joiners, and tell you to leave it alone if you try to talk to it, but it was pretty easy to code it, thanks to the documentation, and it’s a good base to build on. From here, it’s easy to extend the on_public and on_msg subroutines to deal with other messages - for instance, I could use a regular expression to look for “!respond” in the text of the message and if it’s found, respond with any appropriate text.</p>
<p>I’ve hard-coded the appropriate details into the script in this case to make it quicker and easier to test it, but it would be trivial to change it to either accept settings passed as arguments from the command line, or have it grab these from a separate text file.</p>
<p>My initial doubts about Perl are really wearing off. It’s a powerful language and one that, now I’ve picked up the basic syntax, I’m having little trouble getting work done with. </p>
]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[I passed!]]></title>
        <id>http://matthewdaly.co.uk/blog/2010/10/19/i-passed/</id>
        <link href="http://matthewdaly.co.uk/blog/2010/10/19/i-passed/">
        </link>
        <updated>2010-10-19T13:52:55Z</updated>
        <summary type="html"><![CDATA[<p>Just a short post to say that today I did my CIW Perl Fundamentals exam, and passed it. Glad that’s out of the way!</p>
]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[Another Perl snippet...]]></title>
        <id>http://matthewdaly.co.uk/blog/2010/10/16/another-perl-snippet/</id>
        <link href="http://matthewdaly.co.uk/blog/2010/10/16/another-perl-snippet/">
        </link>
        <updated>2010-10-16T20:11:10Z</updated>
        <summary type="html"><![CDATA[<p>Here’s another simple Perl program I thought I’d share. It’s a very simple app for recording notes from the shell. As pasting the last one into WordPress didn’t work too well, <a href="http://dl.dropbox.com/u/5031/notable.pl">it’s on my Dropbox account</a> instead. I’ve used SQLite as the backend for the database (a no-brainer - I really like SQLite for little quick-and-dirty scripts like this) and it works pretty well.</p>
<p>At some point I may go back to this basic concept and expand on it a little - it would make sense to add a GUI to it, either by using a graphical toolkit such as Tk or turning it into a web app. I also like the idea of adapting it to use a non-relational database - something like CouchDB perhaps.</p>
]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[Getting work done with Perl]]></title>
        <id>http://matthewdaly.co.uk/blog/2010/10/15/getting-work-done-with-perl/</id>
        <link href="http://matthewdaly.co.uk/blog/2010/10/15/getting-work-done-with-perl/">
        </link>
        <updated>2010-10-15T19:39:10Z</updated>
        <summary type="html"><![CDATA[<p>After my initial struggles with Perl, I now think I’m really starting to get to grips with the language. I generally find it a pain when you have to learn by building small but basically useless scripts - I always do best when building something useful.</p>
<p>As one of the exercises for my studies I had to open a database connection to a Microsoft Access database, but I wanted to do the exercise in Ubuntu (I’ve always preferred using Unix-like operating systems for programming, and thanks to apt-get it’s a lot less grief installing additional libraries and modules as you need them) and couldn’t get Perl to connect to the database properly, so I resolved to export it to either MySQL or SQLite.</p>
<p>I was able to export it to MySQL in the end using mdbtools, but I wasn’t entirely happy with the end result. I resorted to re-exporting the data as a CSV file, then resolved to write a small Perl script to read the file, parse it using a regular expression to obtain the necessary information, then insert it into a new SQLite database.</p>
<p>Here’s what I came up with:</p>
<pre><code class="hljs lang-perl"><table><tr><td class="linenos" data-pseudo-content="1"></td><td><span class="hljs-comment">#!/usr/bin/perl -w</span></td><tr><td class="linenos" data-pseudo-content="2"></td><td></td><tr><td class="linenos" data-pseudo-content="3"></td><td><span class="hljs-keyword">use</span> strict;</td><tr><td class="linenos" data-pseudo-content="4"></td><td><span class="hljs-keyword">use</span> DBI;</td><tr><td class="linenos" data-pseudo-content="5"></td><td></td><tr><td class="linenos" data-pseudo-content="6"></td><td><span class="hljs-keyword">my</span> $db = <span class="hljs-string">"dbi:SQLite:backend.db"</span>;</td><tr><td class="linenos" data-pseudo-content="7"></td><td></td><tr><td class="linenos" data-pseudo-content="8"></td><td><span class="hljs-keyword">if</span> (!(-e <span class="hljs-string">"backend.db"</span>))</td><tr><td class="linenos" data-pseudo-content="9"></td><td>{</td><tr><td class="linenos" data-pseudo-content="10"></td><td>   <span class="hljs-keyword">print</span> <span class="hljs-string">"Database does not exist. Creating it..."</span>;</td><tr><td class="linenos" data-pseudo-content="11"></td><td></td><tr><td class="linenos" data-pseudo-content="12"></td><td>   <span class="hljs-comment"># Create the database</span></td><tr><td class="linenos" data-pseudo-content="13"></td><td>   <span class="hljs-keyword">my</span> $dbh = DBI-&gt;<span class="hljs-keyword">connect</span>($db) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">"Error in connecting to database! $DBI::errstr"</span>;</td><tr><td class="linenos" data-pseudo-content="14"></td><td>   <span class="hljs-keyword">my</span> $createdb = $dbh-&gt;<span class="hljs-keyword">do</span>(<span class="hljs-string">"CREATE TABLE CARS( ID INTEGER PRIMARY KEY, YEAR INTEGER, MAKE VARCHAR(30), MODEL VARCHAR(30), COLOR VARCHAR(30), PRICE INTEGER);"</span>);</td><tr><td class="linenos" data-pseudo-content="15"></td><td>   $dbh-&gt;disconnect();</td><tr><td class="linenos" data-pseudo-content="16"></td><td>}</td><tr><td class="linenos" data-pseudo-content="17"></td><td></td><tr><td class="linenos" data-pseudo-content="18"></td><td><span class="hljs-keyword">open</span>(READFILE, <span class="hljs-string">"cartable.csv"</span>);</td><tr><td class="linenos" data-pseudo-content="19"></td><td></td><tr><td class="linenos" data-pseudo-content="20"></td><td><span class="hljs-keyword">while</span>()</td><tr><td class="linenos" data-pseudo-content="21"></td><td>{</td><tr><td class="linenos" data-pseudo-content="22"></td><td>   <span class="hljs-keyword">unless</span>($_ =~ <span class="hljs-regexp">m/id,/</span>)</td><tr><td class="linenos" data-pseudo-content="23"></td><td>   {</td><tr><td class="linenos" data-pseudo-content="24"></td><td>      <span class="hljs-regexp">m/\d+\,(\d{4})\,\"(\w+)\"\,\"(\w+)\"\,\"(\w+)\"\,\"(\d+)\"/</span>;</td><tr><td class="linenos" data-pseudo-content="25"></td><td>      <span class="hljs-keyword">my</span> $year = $1;</td><tr><td class="linenos" data-pseudo-content="26"></td><td>      <span class="hljs-keyword">my</span> $make = $2;</td><tr><td class="linenos" data-pseudo-content="27"></td><td>      <span class="hljs-keyword">my</span> $model = $3;</td><tr><td class="linenos" data-pseudo-content="28"></td><td>      <span class="hljs-keyword">my</span> $color = $4;</td><tr><td class="linenos" data-pseudo-content="29"></td><td>      <span class="hljs-keyword">my</span> $price = $5;</td><tr><td class="linenos" data-pseudo-content="30"></td><td></td><tr><td class="linenos" data-pseudo-content="31"></td><td>      <span class="hljs-keyword">my</span> $dbh2 = DBI-&gt;<span class="hljs-keyword">connect</span>($db) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">"Error in connecting to database! $DBI::errstr"</span>;</td><tr><td class="linenos" data-pseudo-content="32"></td><td>      <span class="hljs-keyword">my</span> $insertdb = $dbh2-&gt;<span class="hljs-keyword">do</span>(<span class="hljs-string">"INSERT INTO CARS (YEAR, MAKE, MODEL, COLOR, PRICE) VALUES (\"$year\", \"$make\", \"$model\", \"$color\", \"$price\");"</span>);</td><tr><td class="linenos" data-pseudo-content="33"></td><td>      $dbh2-&gt;disconnect;</td><tr><td class="linenos" data-pseudo-content="34"></td><td>   }</td><tr><td class="linenos" data-pseudo-content="35"></td><td>}</td><tr><td class="linenos" data-pseudo-content="36"></td><td><span class="hljs-keyword">close</span>(READFILE);</td><tr><td class="linenos" data-pseudo-content="37"></td><td></td><tr><td class="linenos" data-pseudo-content="38"></td><td><span class="hljs-keyword">print</span> <span class="hljs-string">"Write completed!\n"</span>;</td><tr><td class="linenos" data-pseudo-content="39"></td><td><span class="hljs-keyword">print</span> <span class="hljs-string">"To demonstrate it works, we'll run a SELECT query against the database...\n"</span>;</td><tr><td class="linenos" data-pseudo-content="40"></td><td></td><tr><td class="linenos" data-pseudo-content="41"></td><td><span class="hljs-comment"># Read the database</span></td><tr><td class="linenos" data-pseudo-content="42"></td><td><span class="hljs-keyword">my</span> $readdb = DBI-&gt;<span class="hljs-keyword">connect</span>($db);</td><tr><td class="linenos" data-pseudo-content="43"></td><td><span class="hljs-keyword">my</span> $dbselect = $readdb-&gt;prepare(<span class="hljs-string">"SELECT * FROM CARS;"</span>);</td><tr><td class="linenos" data-pseudo-content="44"></td><td>$dbselect-&gt;execute;</td><tr><td class="linenos" data-pseudo-content="45"></td><td></td><tr><td class="linenos" data-pseudo-content="46"></td><td><span class="hljs-comment"># Print the results</span></td><tr><td class="linenos" data-pseudo-content="47"></td><td><span class="hljs-keyword">print</span> <span class="hljs-string">"ID\tYear\tMake\tModel\tColor\tPrice\n"</span>;</td><tr><td class="linenos" data-pseudo-content="48"></td><td><span class="hljs-keyword">while</span>(<span class="hljs-keyword">my</span> @row = $dbselect-&gt;fetchrow_array)</td><tr><td class="linenos" data-pseudo-content="49"></td><td>{</td><tr><td class="linenos" data-pseudo-content="50"></td><td>   <span class="hljs-keyword">print</span> <span class="hljs-string">"$row[0]\t$row[1]\t$row[2]\t$row[3]\t$row[4]\t$row[5]\n"</span>;</td><tr><td class="linenos" data-pseudo-content="51"></td><td>}</td><tr><td class="linenos" data-pseudo-content="52"></td><td></td><tr><td class="linenos" data-pseudo-content="53"></td><td><span class="hljs-comment"># Close the connection</span></td><tr><td class="linenos" data-pseudo-content="54"></td><td>$readdb-&gt;disconnect;</td></table></code></pre>
<p>Apologies for the fact that the indentation doesn’t seem to have copied across from Vim very well (can anyone recommend a good WordPress plugin for displaying code, none of the ones I’ve tried seem to be any good?). It works well, and it’s also helped me grasp Perl’s database API better.</p>
<p>I think I’ve got a better idea now of what Python and Perl are best at and when to use each. Perl is a great language, but the fact that a lot of it is implicit makes it a little harder to pick up at first than Python - for instance, the default variable, which is quite a good idea, but takes a little getting used to. Its regex support is great, and I like the database API, but I would find it a lot harder to do any object-oriented programming in Perl than in Python (which I guess is why <a href="http://www.iinteractive.com/moose/">Moose</a> exists). I’ve found Perl very useful for quick and dirty scripts and as a glue language, but for longer scripts Python seems the better choice.</p>
]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[Perl after Python]]></title>
        <id>http://matthewdaly.co.uk/blog/2010/08/16/perl-after-python/</id>
        <link href="http://matthewdaly.co.uk/blog/2010/08/16/perl-after-python/">
        </link>
        <updated>2010-08-16T20:50:57Z</updated>
        <summary type="html"><![CDATA[<p>I’m currently studying for the CIW Web Developer qualification, and having passed the exams for database design and JavaScript, I’m now on to the third component, Perl. I figured that having already picked up a reasonable grasp of another scripting language (namely Python), that I would have no trouble picking up Perl quickly, as happened when I learned JavaScript.</p>
<p>Unfortunately, it hasn’t quite worked out as well as I’d hoped so far, and in a number of ways. First of all, it doesn’t seem to “fit your brain” quite as easily as Python does - I find that the significant number of non-alphanumeric characters used makes it less intuitive than Python, at least for me. I’m also not a great fan of the syntax - in particular, I really am not keen on the syntax used for object-oriented programming. In general I’m finding it a struggle to pick up many things I learned quite quickly in Python.</p>
<p>That said, Perl has plenty of awesome features. CPAN has a staggering number of modules available, and makes it very easy to install them. And of course, its support for regular expressions is second to none. Don’t get me wrong, it’s a language I really want to know better and be able to use well, but I am finding it quite hard going compared to Python.</p>
<p>I strongly suspect, however, that it may well be, at least in part, because I learned Python first and my brain is used to the Pythonic way of doing things, therefore I’m having to unlearn those habits for Perl. Has anyone else learned Python first and then struggled to pick up Perl, or is it just me? Does learning Python first predispose you to finding Perl more difficult?</p>
]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[Moving on to Perl]]></title>
        <id>http://matthewdaly.co.uk/blog/2010/06/23/moving-on-to-perl/</id>
        <link href="http://matthewdaly.co.uk/blog/2010/06/23/moving-on-to-perl/">
        </link>
        <updated>2010-06-23T12:41:29Z</updated>
        <summary type="html"><![CDATA[<p>I’m glad to report that today I passed my CIW JavaScript Fundamentals exam with 98%! I was a bit concerned about this as some of the questions on the practice exam were downright wrong (as in the supposedly correct answers were in fact wrong), but thankfully this turned out not to be the case for the actual exam.</p>
<p>Next step is learning Perl. I’m particularly interested to learn more about Perl because it’s something you can get a lot of use out of - it can be used for regular expressions, general Unix scripting and web development, and I’m interested to see how it compares to Python.</p>
]]></summary>
    </entry>
</feed>